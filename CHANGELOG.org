* Changelog

All notable changes to org-window-habit are documented in this file.

** Unreleased
- No changes yet.

** 2026-02-04 (v0.1.3)

*** Fixed
- Fix logbook parser reading next entry's LOGBOOK drawer

** 2026-02-01 (v0.1.2)

*** Added
- *Unified CONFIG property* (=OWH_CONFIG=) - new recommended way to configure habits
  - Single property contains all habit parameters in a plist
  - Supports *versioned configurations* for evolving habits over time
  - Each version can have different window-specs, assessment-interval, only-days, etc.
  - `:from` and `:until` keys define when each config version is active
  - Gaps in config versions make the habit inactive during that period
- Helper functions for per-config parameter access with defaults:
  - =org-window-habit-config-get-assessment-interval=
  - =org-window-habit-config-get-max-reps-per-interval=
  - =org-window-habit-config-get-reschedule-threshold=
  - =org-window-habit-configs-get-effective-start=
- =org-window-habit-get-effective-start= method for habit instances
- =org-window-habit-migrate-to-config= command to migrate old habits to CONFIG format
- =OWH_ONLY_DAYS= property to restrict habits to specific days of the week (e.g., M/W/F)
  - Completions on non-allowed days are ignored
  - Rescheduling automatically targets the next allowed day
- Week-aligned durations with configurable start day: =(:weeks 1 :start :monday)=
- Assessment interval anchoring to habit start time for consistent evaluation periods
- Comprehensive tests for versioned configs, week alignment, anchoring, and day-of-week restrictions
- =OWH_RESET_TIME= property to ignore completions before a specified timestamp (fresh start)
- =org-window-habit-entry-p= predicate function for programmatic habit detection
- Auto-fix logbook order for backdated habit completions
- Scenario-based tests for edge cases and multi-window specs
- Nix-based test suite with 60+ ERT tests

*** Changed
- Assessment boundaries for fixed-length intervals now anchor to the habit's start time rather than arbitrary calendar boundaries
- =OWH_RESET_TIME= now uses an inactive date-only timestamp (e.g., =[2024-01-15 Mon]=) instead of an active timestamp with time
- Scattered properties (WINDOW_DURATION, etc.) now populate the =configs= slot internally for uniformity
- README updated to recommend CONFIG format as primary configuration method

*** Fixed
- Byte-compile error on Emacs snapshot for unknown slot 'habit'
- Package-lint compatibility for Emacs 29.1

** 2026-01-31 (v0.1.1)

*** Added
- Traditional org-habit style examples in README
- Comprehensive README documentation with examples
- CI integration and MELPA review compliance
- Multiple window specifications support (=OWH_WINDOW_SPECS=)
- Customizable property prefix (=org-window-habit-property-prefix=)
- Max repetitions per interval (=OWH_MAX_REPETITIONS_PER_INTERVAL=)
- Reschedule interval (=OWH_RESCHEDULE_INTERVAL=)
- Visual conformity graph in agenda
- Automatic repeater addition if not present

*** Fixed
- Handle habits with no done times
- Color of completion glyph on current date
- Index comparison logic for completion windows

** Initial Release

*** Added
- Window-based habit tracking for org-mode
- Rolling time window evaluation instead of binary daily tracking
- Conforming ratio calculation
- Automatic rescheduling based on conformity
- Support for various duration formats (days, weeks, months, hours)
- Integration with org-agenda
